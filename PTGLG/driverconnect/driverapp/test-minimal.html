<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Test Minimal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h1>Test Buttons</h1>
  <button id="testBtn">Click Me!</button>
  <div id="output"></div>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  
  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script type="module">
    import { SUPABASE_URL, SUPABASE_ANON_KEY, LIFF_IDS } from '../shared/config.js';
    console.log('‚úÖ Script started');
    
    // Test Supabase
    window.supabaseTest = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    console.log('‚úÖ Supabase initialized:', window.supabaseTest);

    // Test LIFF
    const LIFF_ID = LIFF_IDS.DRIVER_APP;
    
    async function testInit() {
      try {
        await liff.init({ liffId: LIFF_ID });
        console.log('‚úÖ LIFF initialized');
        
        if (liff.isLoggedIn()) {
          const profile = await liff.getProfile();
          const output = document.getElementById('output');
          output.innerHTML = '';
          const p1 = document.createElement('p');
          p1.textContent = `‚úÖ LINE Profile: ${profile.displayName}`;
          const p2 = document.createElement('p');
          p2.textContent = `User ID: ${profile.userId}`;
          output.appendChild(p1);
          output.appendChild(p2);
        } else {
          document.getElementById('output').innerHTML = '<p>üß™ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô LINE)</p>';
        }
      } catch (error) {
        console.error('‚ùå LIFF Error:', error);
        const output = document.getElementById('output');
        output.innerHTML = '';
        const p = document.createElement('p');
        p.textContent = '‚ùå Error: ' + error.message;
        output.appendChild(p);
      }
    }

    // Test button
    document.getElementById('testBtn').addEventListener('click', function() {
      alert('Button works! ‚úÖ');
      console.log('‚úÖ Button clicked');
    });

    // Run
    testInit();
  </script>
</body>
</html>
