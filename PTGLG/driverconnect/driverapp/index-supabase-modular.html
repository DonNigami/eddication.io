<!DOCTYPE html>
<html lang="th">

<!--
================================================================================
DRIVER TRACKING APP - DATABASE SCHEMA ALIGNMENT
================================================================================

This application interfaces with the following Supabase database tables:

1. jobdata (Main Job Table)
   - reference: TEXT (UNIQUE) - Job reference number
   - shipment_no: TEXT - Shipment document number
   - drivers: TEXT - Comma-separated driver names
   - vehicle_desc: TEXT - Vehicle description/plate
   - route: TEXT - Route code
   - seq: INTEGER - Stop sequence number
   - ship_to_code: TEXT - Customer/station code (grouping key)
   - ship_to_name: TEXT - Customer/station name (destination)
   - destination: TEXT - Destination address
   - is_origin_stop: BOOLEAN - TRUE if this is origin/depot point
   - status: TEXT - pending, checkin, checkout, completed
   - checkin_time: TIMESTAMPTZ - Check-in timestamp
   - checkin_lat: NUMERIC - Check-in latitude
   - checkin_lng: NUMERIC - Check-in longitude
   - checkin_odo: INTEGER - Odometer at check-in
   - checkout_time: TIMESTAMPTZ - Check-out timestamp
   - checkout_lat: NUMERIC - Check-out latitude
   - checkout_lng: NUMERIC - Check-out longitude
   - checkout_odo: INTEGER - Odometer at check-out
   - job_closed_at: TIMESTAMPTZ - Job completion timestamp
   - end_odo: INTEGER - Final odometer reading
   - distance_km: NUMERIC - Distance traveled in km

2. alcohol_checks
   - id: UUID (PK)
   - reference: TEXT (FK to jobdata.reference)
   - driver_name: TEXT
   - alcohol_value: NUMERIC(4,3) - BAC level
   - image_url: TEXT - Supabase Storage URL
   - checked_at: TIMESTAMPTZ
   - checked_by: TEXT - LINE User ID

3. admin_logs
   - id: UUID (PK)
   - reference: TEXT
   - action: TEXT - search, checkin, checkout, close_job
   - user_id: TEXT - LINE User ID
   - user_name: TEXT - LINE Display Name
   - details: JSONB
   - location: JSONB - {lat, lng}
   - created_at: TIMESTAMPTZ

4. Location Tables
   - origin: originKey, name, lat, lng, radiusMeters, routeCode
   - customer: stationKey, name, lat, lng, radiusMeters
   - station: stationKey, plant code, lat, lng

================================================================================
-->
<head>
  <base target="_top" />
  <meta charset="UTF-8" />
  <title>Driver Tracking (Supabase - Modular)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Driver Tracking Application - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏á‡∏≤‡∏ô‡∏Ç‡∏ô‡∏™‡πà‡∏á">
  <meta name="theme-color" content="#1abc9c">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- External Stylesheet -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- LIFF SDK - Must load first (no defer) -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
</head>

<body>
  <!-- Offline Mode Bar -->
  <div id="offlineBar" class="offline-bar" role="alert" aria-live="assertive">
    <span class="offline-icon" aria-hidden="true">üìµ</span>
    <span>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï</span>
    <span id="queueBadge" class="queue-badge" style="display:none;">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏™‡πà‡∏á</span>
  </div>

  <!-- Syncing Bar -->
  <div id="syncingBar" class="syncing-bar" role="status" aria-live="polite">
    <span class="spin" aria-hidden="true">üîÑ</span>
    <span id="syncingText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span>
  </div>

  <!-- Toast Notification Container -->
  <div id="toastContainer" class="toast-container" role="region" aria-live="polite" aria-label="‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô"></div>

  <!-- Quick Actions Floating Bar -->
  <div id="quickActions" class="quick-actions" role="region" aria-label="‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô">
    <button class="quick-actions-close" id="quickActionsClose" aria-label="‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô">‚úï</button>
    <div class="quick-actions-header">
      <span class="quick-actions-title">‚ö° ‡∏à‡∏∏‡∏î‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</span>
      <span id="quickActionsStop" class="quick-actions-stop"></span>
    </div>
    <div id="quickActionsButtons" class="quick-actions-buttons">
      <!-- Buttons will be inserted here by app.js -->
    </div>
  </div>

  <!-- Inline Flex Notification -->
  <div id="inlineFlex" class="inline-flex hidden" role="alert" aria-live="polite">
    <div class="inline-flex-bar" aria-hidden="true"></div>
    <div class="inline-flex-title" id="inlineFlexTitle"></div>
    <div class="inline-flex-text" id="inlineFlexMain"></div>
    <div class="inline-flex-sub" id="inlineFlexSub"></div>
  </div>

  <div class="app-shell" id="appShell">
    <!-- Pull-to-Refresh Indicator -->
    <div id="ptrIndicator" class="ptr-indicator" aria-hidden="true">
      <span id="ptrIcon" class="ptr-arrow">‚Üì</span>
      <span id="ptrText" class="ptr-text"></span>
      <div class="ptr-spinner"></div>
    </div>

    <div class="container">
      <div class="card">
        <div class="header">
          <div class="title">
            <span aria-hidden="true">üöö</span> Driver Tracking
            <span class="badge supabase">Supabase</span>
            <span class="realtime-dot" title="Realtime Connected" aria-label="‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Realtime"></span>
          </div>
          <div style="display:flex;gap:4px;">
            <button id="notificationBtn" class="notification-btn" aria-label="‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
              <span aria-hidden="true">üîî</span>
              <span class="notif-badge hidden" aria-hidden="true"></span>
            </button>
            <button id="themeToggle" class="theme-toggle" aria-label="‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô">
              <span aria-hidden="true">üåô</span>
            </button>
          </div>
        </div>

        <div id="status" class="status-text" role="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å LINE...</div>

        <!-- GPS Status Indicator -->
        <div id="gpsStatus" class="gps-status checking" style="cursor:pointer;" role="status" aria-live="polite" aria-label="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ GPS">
          <span class="gps-icon" aria-hidden="true">üìç</span>
          <span id="gpsText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö GPS...</span>
          <div class="gps-bars" aria-hidden="true">
            <div class="gps-bar"></div>
            <div class="gps-bar"></div>
            <div class="gps-bar"></div>
            <div class="gps-bar"></div>
          </div>
          <span id="gpsAccuracy" class="gps-accuracy"></span>
        </div>

        <div class="field-group">
          <label for="keyword">‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏á‡∏≤‡∏ô (Reference No.)</label>
          <input id="keyword" type="text" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç Reference ‡πÄ‡∏ä‡πà‡∏ô 2511S15403" maxlength="50" autocomplete="off" />
          <div id="keywordError" class="error-message" role="alert"></div>
        </div>

        <button id="btnSearch">
          <span>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡∏î‡∏∂‡∏á‡∏á‡∏≤‡∏ô</span>
        </button>

        <!-- Vehicle Breakdown Button -->
        <button id="btnBreakdown" class="btn-breakdown">
          <span>üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Vehicle Breakdown</span>
        </button>

        <!-- Report Breakdown/Accident Button -->
        <button id="btnReportBreakdown" class="btn-report-breakdown">
          <span>üö® ‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢ / ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</span>
        </button>

        <!-- Force Refresh Button (shown when job is loaded) -->
        <button id="btnForceRefresh" class="btn-refresh hidden" style="width:100%;margin-top:8px;">
          <span>üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
        </button>

        <div id="summary" class="summary-card hidden"></div>

        <div id="alcoholContainer" class="summary-card hidden" style="margin-top:10px;"></div>

        <!-- Trip Dashboard -->
        <div id="tripDashboard" class="trip-dashboard hidden" role="region" aria-label="‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß">
          <div class="trip-dashboard-header">
            <div class="trip-dashboard-title">
              <span aria-hidden="true">üìä</span> ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
            </div>
            <div id="tripRef" class="trip-dashboard-ref"></div>
          </div>

          <div class="trip-stats">
            <div class="trip-stat">
              <div id="tripCompleted" class="trip-stat-value">0/0</div>
              <div class="trip-stat-label">‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à</div>
            </div>
            <div class="trip-stat">
              <div id="tripDuration" class="trip-stat-value">-</div>
              <div class="trip-stat-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
            </div>
          </div>

          <div class="trip-progress">
            <div class="trip-progress-header">
              <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
              <span id="tripProgressPercent">0%</span>
            </div>
            <div class="trip-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
              <div id="tripProgressFill" class="trip-progress-fill" style="width:0%"></div>
            </div>
          </div>

          <div id="tripStopsMini" class="trip-stops-mini" aria-label="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏∏‡∏î‡∏™‡πà‡∏á">
            <!-- Mini stop dots will be rendered here -->
          </div>
        </div>

        <div id="timelineContainer" class="timeline-container hidden">
          <div class="timeline-title">
            ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            <span style="font-size:0.8rem;color:var(--text-sub);">(‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏∏‡∏î‡∏™‡πà‡∏á)</span>
          </div>
          <ul id="timeline" class="timeline" role="list" aria-label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∏‡∏î‡∏™‡πà‡∏á"></ul>

          <div id="closeJobContainer" class="hidden" style="margin-top:8px;">
            <button id="btnCloseJob" class="btn-secondary" style="width:100%;margin-bottom:6px;">‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (‡∏£‡∏ñ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)</button>
            <button id="btnEndTrip" class="btn-secondary" style="width:100%;display:none;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏ö‡∏ó‡∏£‡∏¥‡∏õ (‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡∏•‡πå + ‡∏à‡∏∏‡∏î‡∏à‡∏ö‡∏ó‡∏£‡∏¥‡∏õ)</button>
          </div>
        </div>

        <div id="lastUpdatedContainer" class="last-updated hidden">
          <div class="last-updated-text">
            <span aria-hidden="true">üîÑ</span>
            <span id="lastUpdatedText">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: -</span>
          </div>
          <span id="autoRefreshBadge" class="auto-refresh-badge">Realtime</span>
        </div>

        <div class="footer-note">
          ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Check-in / Check-out ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏ô‡∏à‡∏≠<br>
          <small style="color:#3ecf8e;">Powered by Supabase - Modular Version</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced UX Features (ES Module) -->
  <script type="module" src="js/enhanced-ux.js"></script>

  <!-- Vehicle Breakdown Modal -->
  <div id="breakdownModal" class="breakdown-modal hidden" role="dialog" aria-modal="true" aria-labelledby="breakdownModalTitle">
    <div class="breakdown-modal-backdrop" id="breakdownModalBackdrop"></div>
    <div class="breakdown-modal-content">
      <div class="breakdown-modal-header">
        <h2 id="breakdownModalTitle">üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Vehicle Breakdown</h2>
        <button class="breakdown-modal-close" id="breakdownModalClose" aria-label="‡∏õ‡∏¥‡∏î">√ó</button>
      </div>
      <div class="breakdown-modal-body">
        <p class="breakdown-modal-desc">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏™‡πà‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà Check-out) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà</p>

        <!-- Filter options -->
        <div class="breakdown-filter">
          <input id="breakdownSearch" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Reference..." class="breakdown-search-input" />
        </div>

        <!-- Job list -->
        <div id="breakdownJobList" class="breakdown-job-list">
          <div class="breakdown-loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
        </div>

        <!-- Selected job info -->
        <div id="breakdownSelectedInfo" class="breakdown-selected-info hidden">
          <div class="breakdown-selected-header">
            <span class="breakdown-selected-label">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</span>
            <span id="breakdownSelectedRef" class="breakdown-selected-ref"></span>
          </div>
          <div class="breakdown-selected-details">
            <div class="breakdown-detail-item">
              <span class="breakdown-detail-label">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏ñ:</span>
              <span id="breakdownSelectedVehicle"></span>
            </div>
            <div class="breakdown-detail-item">
              <span class="breakdown-detail-label">‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö:</span>
              <span id="breakdownSelectedDriver"></span>
            </div>
            <div class="breakdown-detail-item">
              <span class="breakdown-detail-label">‡∏à‡∏∏‡∏î‡∏Ñ‡πâ‡∏≤‡∏á:</span>
              <span id="breakdownSelectedStops"></span>
            </div>
          </div>

          <!-- New vehicle selection -->
          <div class="breakdown-new-vehicle-section">
            <label for="breakdownNewVehicle">‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
            <input id="breakdownNewVehicle" type="text" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡πÉ‡∏´‡∏°‡πà" class="breakdown-new-vehicle-input" />
          </div>

          <!-- Reason -->
          <div class="breakdown-reason-section">
            <label for="breakdownReason">‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏</label>
            <select id="breakdownReason" class="breakdown-reason-select">
              <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --</option>
              <option value="breakdown">‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢</option>
              <option value="accident">‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</option>
              <option value="maintenance">‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á</option>
              <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
            </select>
          </div>

          <button id="btnConfirmBreakdown" class="btn-breakdown-confirm">
            <span>‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Report Breakdown/Accident Modal -->
  <div id="reportBreakdownModal" class="breakdown-modal hidden" role="dialog" aria-modal="true" aria-labelledby="reportBreakdownModalTitle">
    <div class="breakdown-modal-backdrop" id="reportBreakdownModalBackdrop"></div>
    <div class="breakdown-modal-content">
      <div class="breakdown-modal-header">
        <h2 id="reportBreakdownModalTitle">üö® ‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢ / ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</h2>
        <button class="breakdown-modal-close" id="reportBreakdownModalClose" aria-label="‡∏õ‡∏¥‡∏î">√ó</button>
      </div>
      <div class="breakdown-modal-body">
        <p class="breakdown-modal-desc">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠</p>

        <!-- Current job info (if any) -->
        <div id="reportBreakdownCurrentJob" class="report-breakdown-current-job hidden">
          <div class="report-breakdown-job-header">
            <span class="report-breakdown-job-label">‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</span>
            <span id="reportBreakdownCurrentRef" class="report-breakdown-job-ref"></span>
          </div>
        </div>

        <!-- Report form -->
        <div class="breakdown-report-form">
          <!-- Type -->
          <div class="breakdown-report-field">
            <label for="reportBreakdownType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á <span class="required">*</span></label>
            <select id="reportBreakdownType" class="breakdown-report-select">
              <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó --</option>
              <option value="breakdown">üîß ‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢</option>
              <option value="accident">üöó ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏</option>
              <option value="maintenance">üî® ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á</option>
              <option value="emergency">üö® ‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
            </select>
          </div>

          <!-- Description -->
          <div class="breakdown-report-field">
            <label for="reportBreakdownDesc">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î <span class="required">*</span></label>
            <textarea id="reportBreakdownDesc" class="breakdown-report-textarea" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏, ‡∏ú‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö ‡∏Ø‡∏•‡∏Ø"></textarea>
          </div>

          <!-- Location -->
          <div class="breakdown-report-field">
            <label for="reportBreakdownLocation">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏</label>
            <input id="reportBreakdownLocation" type="text" class="breakdown-report-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô">
            <button type="button" id="btnUseCurrentLocation" class="btn-small btn-outline" style="margin-top:4px;">
              üìç ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            </button>
          </div>

          <!-- Request -->
          <div class="breakdown-report-field">
            <label>‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:</label>
            <label class="breakdown-report-checkbox">
              <input type="checkbox" id="reportRequestNewVehicle" checked>
              <span>‡∏™‡πà‡∏á‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏°‡∏≤‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠</span>
            </label>
            <label class="breakdown-report-checkbox">
              <input type="checkbox" id="reportRequestCloseTrip">
              <span>‡∏õ‡∏¥‡∏î‡∏à‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡∏ô‡∏µ‡πâ</span>
            </label>
          </div>

          <!-- Photo (optional) -->
          <div class="breakdown-report-field">
            <label for="reportBreakdownPhoto">‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
            <input id="reportBreakdownPhoto" type="file" accept="image/*" capture="environment" class="breakdown-report-file">
          </div>

          <button id="btnSubmitReport" class="btn-breakdown-confirm">
            <span>üì§ ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Application Script (ES Module) -->
  <script type="module" src="js/app.js?v=20260129000001"></script>
</body>

</html>
